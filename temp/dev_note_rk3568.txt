
setenv bootargs 'storagemedia=emmc androidboot.storagemedia=emmc androidboot.mode=normal  androidboot.dtb_idx=0 androidboot.dtbo_idx=0 dyndbg="file drivers/rtc/rtc-rx8130.c +p"'
setenv bootargs 'storagemedia=emmc androidboot.storagemedia=emmc androidboot.mode=normal  androidboot.dtb_idx=0 androidboot.dtbo_idx=0 dyndbg="file sound/soc/codecs/ak7755.c +p"'
setenv bootargs 'storagemedia=emmc androidboot.storagemedia=emmc androidboot.mode=normal  androidboot.dtb_idx=0 androidboo		t.dtbo_idx=0 dyndbg="file drivers/media/i2c/tp2860.c +p"'



adb shell 'echo "file sound/soc/codecs/ak7755.c +p" > /sys/kernel/debug/dynamic_debug/control';

adb root ; adb remount ; adb push out/target/product/le1000/vendor/lib/hw/audio.primary.rk30board.so /vendor/lib/hw/

adb wait-for-device ; adb shell "setprop log.tag.AudioHardwareTiny VERBOSE ; setprop log.tag.alsa_mixer VERBOSE; setprop log.tag.alsa_route VERBOSE ; setprop log.tag.V4L2Subdev VERBOSE" ;

adb wait-for-device ; adb root ; adb remount ;while true; do  adb shell 'ls -alh /data/debug.pcm' ; sleep 0.5 ; done


adb wait-for-device ; adb shell  "cat /sys/kernel/debug/regmap/5-0018-ak7755-codec/registers " > debug.reg


-----

adb root ;adb remount ; adb push build_linux_4.19.232/drivers/net/wireless/rockchip_wlan/rtl8822es/8822es.ko /vendor/lib/modules

mmm hardware/realtek -j32 ; mmm frameworks/opt/net/wifi/libwifi_hal -j32 ; 
adb root ; adb remount ; adb push out/target/product/rk3568_rgbp05/vendor/lib/libwifi-hal.so /vendor/lib/libwifi-hal.so ; adb push out/target/product/rk3568_rgbp05/vendor/lib64/libwifi-hal.so /vendor/lib64/libwifi-hal.so

mmm external/wpa_supplicant_8/wpa_supplicant -j32 ; mmm external/wpa_supplicant_8/hostapd -j32 
adb root ; adb remount ; adb push out/target/product/rk3568_rgbp05/vendor/bin/hw/wpa_supplicant /vendor/bin/hw/wpa_supplicant  ; adb push out/target/product/rk3568_rgbp05/vendor/bin/hw/hostapd /vendor/bin/hw/hostapd

insmod 8822es.ko rtw_channel_plan=0x20

insmod /vendor/lib/modules/bs83b08.ko dyndbg=+p

-----
# debug

adb shell 'echo "file drivers/media/i2c/gc2145.c +p" > /sys/kernel/debug/dynamic_debug/control '
adb shell 'echo "file drivers/media/i2c/tp2860.c +p" > /sys/kernel/debug/dynamic_debug/control '
adb wait-for-device ; adb root ; adb remount ; adb shell 'echo "file drivers/media/i2c/tp2860.c +p" > /sys/kernel/debug/dynamic_debug/control '
setprop log.tag.Camera3HAL VERBOSE ;setprop log.tag.Camera3HALModule VERBOSE ; setprop log.tag.HwStreamBase VERBOSE ; setprop log.tag.V4L2VideoNode VERBOSE;  setprop log.tag.RKISP2GraphConfig VERBOSE
echo 3 > /sys/module/video_rkisp/parameters/debug


# media framework
## gc2145 
/dev/media0
/dev/video0  stream_cif_dvp_id0
/dev/video1  stream_cif_dvp_id1
/dev/video2  stream_cif_dvp_id2
/dev/video3  stream_cif_dvp_id3s
## tp2860
/dev/media1  
/dev/video5  rkcif_mainpath
/dev/video6  rkcif_selfpath
/dev/video7  rkisp_rawwr0
/dev/video8  rkisp_rawwr2
/dev/video9  rkisp_rawwr3
/dev/video10 rkisp_rawrd0_m
/dev/video11 rkisp_rawrd2_s
/dev/video12 rkisp-statistics
/dev/video13 rkisp-input-params


# build
# camera3_profiles.xml
adb push hardware/rockchip/camera/etc/camera/camera3_profiles_rk356x.xml /vendor//etc/camera/camera3_profiles.xml
adb push hardware/rockchip/camera/etc/camera/camera3_profiles_rk3568_develop.xml /vendor//etc/camera/camera3_profiles.xml
adb push out/target/product/rk3568_rgbp05/vendor/lib/hw/camera.rk30board.so /vendor/lib/hw/ ; adb push out/target/product/rk3568_rgbp05/vendor/lib64/hw/camera.rk30board.so /vendor/lib64/hw/
adb shell pkill camera && adb shell pkill provider

# capture
media-ctl -d /dev/media1 -V '"m00_b_tp2860 4-0044":0 [fmt:UYVY2X8/720x480]'
v4l2-ctl -d /dev/video6 --set-fmt-video=width=720,height=480,pixelformat=NV12 --stream-mmap=3 --stream-to=/data/local/tmp/out.yuv --stream-skip=1 --stream-count=1
ffplay out.yuv -f rawvideo -pixel_format nv12 -video_size 720x480
-----


int V4L2VideoNode::start(int initialSkips)

-----
tp2860_test w 0x40 0x08 ; tp2860_test w 0x14 0xc1 ; tp2860_test w 0x14 0x41;



feat : Directly copy camera3_profiles.xml in rk3568_rgbp05.mk

- updated rk3568_rgbp05.mk to directly copy camera3_profiles_rk3568_rgbp05.xml to the target vendor directory.
- removed conditional logic for copying camera3_profiles.xml to simplify the build process.

this change ensures that the camera3_profiles file is always copied for the rk3568_rgbp05 device configuration.



-----
[hide debug console]

 Kernel command line: storagemedia=emmc androidboot.storagemedia=emmc androidboot.mode=normal  androidboot.dtb_idx=0
  androidboot.dtbo_idx=0  androidboot.verifiedbootstate=orange androidboot.serialno=sXp510-4h console=ttyFIQ0 firmware_class.path=/vendor/etc/firmware init=/init rootwait ro loop.max_part=7 androidboot.console=ttyFIQ0 androidboot.wificountrycode=CN androidboot.hardware=rk30board androidboot.boot_devices=fe310000.sdhci,fe330000.nandc androidboot.selinux=permissive buildvariant=userdebug earlycon=uart8250,mmio32,0xfe6d0000
 
 
short-key
ctrl+c: U-Boot Î™ÖÎ†πÏ§Ñ Î™®ÎìúÎ°ú Îì§Ïñ¥Í∞ëÎãàÎã§.
ctrl+d: Î°úÎçî Î≤ÑÎãù Î™®ÎìúÎ°ú Îì§Ïñ¥Í∞ëÎãàÎã§.
ctrl+b: ÎßàÏä§ÌÅ¨Î°¨ ÍµΩÍ∏∞ Î™®ÎìúÎ°ú Îì§Ïñ¥Í∞ëÎãàÎã§.
ctrl+f: fastboot Î™®ÎìúÎ°ú Îì§Ïñ¥Í∞ëÎãàÎã§.
ctrl+m: ÎπÑÎìúÎû®/ÏãúÏä§ÌÖú Ï†ïÎ≥¥ Ïù∏ÏáÑ;
ctrl+i: Ïª§ÎÑê initcall_debug ÌôúÏÑ±Ìôî
ctrl+p: Î™ÖÎ†πÏ§Ñ Ï†ïÎ≥¥ Ïù∏ÏáÑ;
ctrl+s: "Ïª§ÎÑê ÏãúÏûë..."ÏùÑ ÏûÖÎ†•Ìïú Îã§Ïùå U-Boot Î™ÖÎ†πÏ§ÑÏùÑ ÏûÖÎ†•Ìï©ÎãàÎã§.

 => printenv bootargs 
 bootargs=storagemedia=emmc androidboot.storagemedia=emmc androidboot.mode=normal  androidboot.dtb_idx=0 androidboot.dtbo_idx=0
CONFIG_EXTRA_ENV_SETTINGS="storagemedia=emmc androidboot.storagemedia=emmc androidboot.mode=normal androidboot.dtb_idx=0 androidboot.dtbo_idx=0 quiet loglevel=0"

setenv bootargs 'storagemedia=emmc androidboot.storagemedia=emmc androidboot.mode=normal androidboot.dtb_idx=0 androidboot.dtbo_idx=0 quiet loglevel=0 console=null'
saveenv
 
fdt addr ${fdt_addr_r} 
fdt resize
fdt print /fiq-debugger
fdt set /fiq-debugger status okay 
fdt print /serial@fe6d0000 
fdt set /serial@fe6d0000  status disabled


-----
bootargs storagemedia=emmc androidboot.storagemedia=emmc androidboot.mode=normal androidboot.dtb_idx=0 androidboot.dtbo_idx=0

Kernel command line: storagemedia=emmc androidboot.storagemedia=emmc androidboot.mode=normal androidboot.dtb_idx=0 androidboot.dtbo_idx=0 androidboot.verifiedbootstate=orange androidboot.serialno=sXp510-4h;android_bootloader.c] [console=ttyFIQ0 firmware_class.path=/vendor/etc/firmware init=/init rootwait ro loop.max_part=7;BoardConfig.mk] androidboot.console=ttyFIQ0 androidboot.wificountrycode=KR androidboot.hardware=rk30board androidboot.boot_devices=fe310000.sdhci,fe330000.nandc androidboot.selinux=per missive buildvariant=userdebug earlycon=uart8250,mmio32,0xfe6d0000


rk3568_rgbp05:/ # cat /proc/cmdline
[storagemedia=emmc androidboot.storagemedia=emmc androidboot.mode=normal  androidboot.dtb_idx=0 androidboot.dtbo_idx=0;bootloader bootargs]  [androidboot.verifiedbootstate=orange androidboot.serialno=sXp510-4h console=ttyFIQ0 firmware_class.path=/vendor/etc/firmware init=/init rootwait ro loop.max_part=7 androidboot.console=ttyFIQ0 androidboot.wificountrycode=KR androidboot.hardware=rk30board androidboot.boot_devices=fe310000.sdhci,fe330000.nandc androidboot.selinux=permissive buildvariant=userdebug [earlycon=uart8250,mmio32,0xfe6d0000;rk3568-rgb-p05.dts]


androidboot.dtb_idx=0 androidboot.dtbo_idx=0 

setenv bootargs storagemedia=emmc androidboot.storagemedia=emmc androidboot.mode=normal  androidboot.dtb_idx=0
setenv bootargs storagemedia=emmc androidboot.storagemedia=emmc androidboot.mode=normal  androidboot.dtb_idx=1

BOOT_CMDLINE="RICH firmware_class.path=/vendor/etc/firmware init=/init rootwait ro loop.max_part=7 androidboot.wificountrycode=KR androidboot.hardware=rk30board androidboot.boot_devices=fe310000.sdhci,fe330000.nandc androidboot.selinux=permissive buildvariant=userdebug GOLD"
BOOT_CMDLINE="RICH firmware_class.path=/vendor/etc/firmware init=/init rootwait ro loop.max_part=7 androidboot.wificountrycode=KR androidboot.hardware=rk30board androidboot.boot_devices=fe310000.sdhci,fe330000.nandc androidboot.selinux=permissive buildvariant=userdebug console=ttyFIQ0"


-----
recovery
printenv bootargs
bootargs=storagemedia=emmc androidboot.storagemedia=emmc androidboot.mode=normal  androidboot.dtb_idx=0 androidboot.dtbo_idx=0


setenv bootargs storagemedia=emmc androidboot.storagemedia=emmc androidboot.mode=normal  androidboot.dtb_idx=0 androidboot.dtbo_idx=0 video=RGB-1:1024x600@60



fdt addr ${fdt_addr_t}
fdt pirnt /vop@fe040000 assigned-clocks
assigned-clocks = <0x0000001f 0x000000df 0x0000001f 0x000000e1>;

-----
ak7755_io_door_ring = count(12)
ak7755_io_door_call = count(29)
ak7755_io_stby = count(16)
ak7755_io_extr_loby_call(27)

-----
cat /sys/class/drm/card0-DPI-1/enabled
cat /sys/class/drm/card0-HDMI-A-1/enabled

cat /sys/class/drm/card0-DPI-1/modes
1024x600
cat /sys/class/drm/card0-HDMI-A-1/modes
640x480

boot.img Îäî dtbo partionÏóê dtbo.imgÏùÑ Ï∞∏Ï°∞.
recovery.img Îäî dtbo partition dtbo.imgÏùÑ Ï∞∏Ï°∞ ÌïòÏßÄ ÏïäÏùå.

-----
bamboo build debug

BAMBOOÏóê ÏùòÌï¥ ÎπåÎìúÎêú  SDP530-4H Ïù¥ÎØ∏ÏßÄÍ∞Ä Î∂ÄÌåÖ ÎêòÏßÄ ÏïäÎäî ÌòÑÏÉÅ Î∞úÏÉù. 

https://ci.kdiwin.com:8085/browse/HP5G-SDP5304HMAS-40 : sdp530-4h_occure_40_update.img : Î¨∏Ï†ú Ïù¥ÎØ∏ÏßÄ.(ÌòÑÏû¨ rebuildÎêòÍ≥† ÏûàÏùå)  
https://ci.kdiwin.com:8085/browse/HP5G-SDP5304HMAS-39 : sdp530-4h_normal_39_update.img : Ï†ïÏÉÅ Ïù¥ÎØ∏ÏßÄ. 

snapshot ÎπÑÍµê Ïãú, project Ïóê ÏòÅÌñ• Ï§Ñ ÎßåÌïú diff Îäî ÏóÜÏùå. (ÌîåÎû´Ìèº Í¥ÄÎ†® ProjectÎäî rk_kernel, rk_hardware_rk29_audio Ïù¥Î©∞, Ïò§ÎîîÏò§ Í¥ÄÎ†® commit ÏóÖÎç∞Ïù¥Ìä∏)

Í∞ÄÏÑ§1-1)
HN 192.168.23.235 PCÏóêÏÑú ÎπåÎìúÎêú Ïù¥ÎØ∏ÏßÄÏóêÏÑú Î¨∏Ï†ú ÌòÑÏÉÅ Î∞úÏÉùÎêòÎäî Í≤ÉÏúºÎ°ú Ï∂îÏ∏°Îê®. 
ÎîîÎ≤ÑÍπÖÏùÑ ÏúÑÌï¥ SDP530-4H_master BAMBOO ÎπåÎìúÎ•º HN 192.168.23.217 ÏóêÏÑú ÏßÑÌñâ Ï§ë. : Í≤∞Í≥º ÏóÖÎç∞Ïù¥Ìä∏ Ìï¥ÏïºÌï®. 192.168.23.217 PCÏóêÏÑú ÎπåÎìúÎêú uboot.img Ïóê Î¨∏Ï†ú ÏóÜÏùå. 
ÎîîÎ≤ÑÍπÖÏùÑ ÏúÑÌï¥ SWP530-4H_master BAMBOO ÎπåÎìúÎ•º HN 192.168.23.235 ÏóêÏÑú ÏßÑÌñâ Ï§ë. : Í≤∞Í≥º ÏóÖÎç∞Ïù¥Ìä∏ Ìï¥ÏïºÌï®. 192.168.23.235 PCÏóêÏÑú ÎπåÎìúÎêú SWP530-4H Ïùò uboot.imx ÏÇ¨Ïö© Ïãú, ÌòÑÏÉÅ Ïû¨ÌòÑ. : update.img ÏóêÏÑúÎèÑ ÎèôÏùº


Í∞ÄÏÑ§1-2)
Î¨∏Ï†ú Ïù¥ÎØ∏ÏßÄÏóêÏÑú rkrom Ïù¥ÎØ∏ÏßÄÎ•º Î≥ÄÍ≤Ω : ÏòÅÌñ• ÏóÜÏùå
Î¨∏Ï†ú Ïù¥ÎØ∏ÏßÄÏóêÏÑú uboot Ïù¥ÎØ∏ÏßÄÎ•º Î≥ÄÍ≤Ω : ÏòÅÌñ• ÏûàÏùå


-----
swp530-4h, sdp530-4h audio volume

ak7755_io_door_ring Í∏∞Ï§ÄÏúºÎ°ú normal ÏÑ∏ÌåÖ ÌïòÍ≥†, 
door_ring Ïãú, "DAC Digital Volume R" Í∞í Up.


-----

refactor : Update rk3568_poc config

- updated the location of rk3568_poc configuration files.
- adjusted paths to reflect the new directory structure.
- ensured compatibility with the updated build process.

-----
refactor: improve readability and maintainability

-----

adb push device/kdiwin/nova/modules/touch/keypad.kcm system/usr/keychars/Vendor_36b3_Product_36b3.kcm ; adb push device/kdiwin/nova/modules/touch/keypad.kl system/usr/keylayout/Vendor_36b3_Product_36b3.kl

rk3568_poc:/ # i2cset -f  -y 1 0x50 0x20 0x0100 w
rk3568_poc:/ # i2cset -f  -y 1 0x50 0x20 0x0200 w

 echo 14 > /sys/class/gpio/export; echo "out" > sys/class/gpio/gpio14/direction; echo 0 > sys/class/gpio/gpio14/value; echo 1 > sys/class/gpio/gpio14/value
 
-----

[swp530-4h]
normal boot -> reboot bootloader -> rbusb -> fastboot
normal boot -> reboot recovery -> reboot bootloader -> 


----

[bluetooth]

BT_WAKE_HOST - GPIO2_B6 (ÏòµÏÖò)
HOST_WAKE_BT - GPIO2_C4 (ÏòµÏÖò)
BT_RTS - GPIO2_B7 (H5 protocol, ÌïÑÏàò)
BT_CTS - GPIO2_C0 (H5 protocol, ÌïÑÏàò)
BT_EN - GPIO2_C1 : bt_default_reset (ÌïÑÏàò)

-----

[wlan]

WL_WAKE_HOST - GPIO1_B3 (ÏòµÏÖò)
WL_SDIO0_INT - GPIO0_B5 (ÏòµÏÖò)

-----
chore : Update AK7755 DSP header-related options in kernel config
chore : Remove duplicated kernel config
chore : Update kernel config about target device


-----

[dts]             [keypad.kl]    [keypad.kcm] [frameworks/base/core/api/current.txt]
KEY_NUMERIC_PUND  key 523 POUND  key POUND     KEYCODE_POUND
                                               KEYCODE_BUTTON_1
                                               
setenv bootargs 'storagemedia=emmc androidboot.storagemedia=emmc androidboot.mode=normal  androidboot.dtb_idx=0 androidboot.dtbo_idx=0 loglevel=9 dyndbg="file drivers/input/misc/bs83b.c +p"'

adb shell 'echo "file drivers/input/misc/bs83b.c +p" > /sys/kernel/debug/dynamic_debug/control'
    
dyndbg="file drivers/input/misc/bs83b.c +p"

-----

SGP511
[Ïò§ÎîîÏò§ Îç∞Ïù¥ÌÑ∞ Ï†úÏñ¥][Îß§Ìä∏Î¶≠Ïä§ÌÇ§][ÎîîÏä§ÌîåÎ†àÏù¥][ÎπÑÎîîÏò§ Îç∞Ïù¥ÌÑ∞ Ï†úÏñ¥][RECEIVER][PSTN]

- pin muxing 
- Ïò§ÎîîÏò§ Îç∞Ïù¥ÌÑ∞ Ï†úÏñ¥
- Îß§Ìä∏Î¶≠Ïä§ ÌÇ§ ÏûÖÎ†• Ïû•Ïπò
- ÎπÑÎîîÏò§ Îç∞Ïù¥ÌÑ∞ Ï†úÏñ¥
- RECEIVER
- PSTN

-----

setenv bootargs 'storagemedia=emmc androidboot.storageq2media=emmc androidboot.mode=normal  androidboot.dtb_idx=0 androidboot.dtbo_idx=0 loglevel=9 dyndbg="file drivers/input/keyboard/matrix_keypad.c +p"'


-----
SWP530-4H
[VOIP] DOOR - VOIP_DOOR_CALL : adc & dac Ï†ïÏÉÅ
[VOIP] LOBY - VOIP_EXTR_CALL : dac Îßå Ï†ïÏÉÅ. adc ÌôïÏù∏ Ï§ë.
DAC RIGHT chÎ°ú  echoline Ï∂úÎ†•
Í∞ÄÏÑ§ : Left ChannelÏóê Îç∞Ïù¥ÌÑ∞Í∞Ä ÏûàÍ≥†, Right ChannelÏùÄ NullÏù∏Í≤ΩÏö∞? 
tinymix 0 15; tinymix 6 250; tinymix 59 1
tinymix 0 0; tinymix 6 0; tinymix 59 0

 cmd wall_service  set_audio_route voip_loby_call
 cmd wall_service show_navigation_bar
  
  
adb shell "echo 1 > /sys/class/gpio/gpio40/value; echo 1 > /sys/class/gpio/gpio5/value; echo 0 > /sys/class/gpio/gpio22/value; echo 0 >  /sys/class/gpio/gpio18/value; "


set route(voip_loby_call) -> recording -> playing Ïãú, Ïä§Ìä∏Î¶º ÏûÖ/Ï∂úÎ†• O

recording -> playing -> set route(voip_loby_call) Ïãú, Ïä§Ìä∏Î¶º ÏûÖÏ∂úÎ†• X 

 
ÎèÑÏñ¥ : set Route > AudioRecord Îì± Ï¥àÍ∏∞Ìôî
 audio hal adev_open_input_stream device
 adev_open_input_stream(4093)
Î°úÎπÑ : AudioRecord Îì± Ï¥àÍ∏∞Ìôî > set Route 
 adev_open_input_stream > adev_set_parameters: voip_loby_call 
 Device : 0x4
 SampleRate : 16000
 Channels : 2
 Formate : 0 
 PreiodSize : 256
 get_next_buffer, channel_mask(0xc), channels(0x2)
 getInputRouteFromDevice Í∞Ä Ìò∏Ï∂úÎê®. 
 
 
1. DAI Îç∞Ïù¥ÌÑ∞Î•º ScopeÎ°ú ÌôïÏù∏.
2. Normal Input Rec Ïù¥ÌõÑ, Tinymix APIÎ•º ÌÜµÌï¥ Ïú†ÏÇ¨ÌïòÍ≤å Ï†úÏñ¥ ÌõÑ, ÎèôÏùº ÌòÑÏÉÅÏù¥ Î∞úÏÉùÎêòÎäî ÏßÄ ÌôïÏù∏. -> Codec Î¨∏Ï†úÎäî ÏïÑÎãò.
tinymix "DSP Firmware PRAM" "basic"; tinymix "DSP Firmware CRAM" "basic"; tinymix "SDOUT1 MUX" "DSP"; tinymix "SDOUT1 Enable Switch" 1 ;tinymix "ADC Digital Volume L" 0; tinymix "ADC Digital Volume R" 201 ; tinymix "DAC Digital Volume L" 0; tinymix "DAC Digital Volume R" 249;tinymix "Mic Enable" 0 ; tinymix "IO Control Path" "VOIP_DOOR_CALL"
3. Ìå®Ïπò(ÏΩîÎç± ÏÑ§Ï†ï Î≥ÄÍ≤Ω ÌõÑ, do_in_standby Î•º Ìò∏Ï∂úÌïòÏó¨ Ïä§Ìä∏Î¶ºÏùÑ Ïû¨ÏãúÏûëÌïòÎèÑÎ°ù Î≥ÄÍ≤Ω)  -> 


mclk :  Hz
pclk :  Hz



------

init display fail issue

Ïã§Ìå®,
130|rk3568_poc:/proc/device-tree/reserved-memory/drm-logo@00000000 $ cat reg  | busybox hexdump
0000000 0000 0000 0000 0000 0000 0000 0000 0000
0000010

ÏÑ±Í≥µ,
127|rk3568_poc:/proc/device-tree/reserved-memory/drm-logo@00000000 # cat reg | busybox hexdump
0000000 0000 0000 f07d 0000 0000 0000 2000 4c75
0000010

mkbootimg \
  --kernel fail/unpack_bootimg/kernel \
  --ramdisk fail/unpack_bootimg/ramdisk \
  --second succ/unpack_bootimg/resource.img \
  --dtb fail/unpack_bootimg/dtb \
  --pagesize 2048 \
  --base 0x00000000 \
  --kernel_offset 0x10008000 \
  --ramdisk_offset 0x11000000 \
  --second_offset 0x10f00000 \
  --tags_offset 0x10000100 \
  --dtb_offset 0x11f00000 \
  --header_version 2 \
  --os_version 12.0.0 \
  --os_patch_level 2022-03 \
  --cmdline "console=ttyFIQ0 firmware_class.path=/vendor/etc/firmware init=/init rootwait ro loop.max_part=7 androidboot.console=ttyFIQ0 androidboot.wificountrycode=CN androidboot.hardware=rk30board androidboot.boot_devices=fe310000.sdhci,fe330000.nandc androidboot.selinux=permissive buildvariant=userdebug" \
  -o out/boot_img_with_success_second.img


-----
[SWP530] WIFI Î∂ÄÌåÖÏãú EnableÏïàÎê®
https://its.kdiwin.com:8080/browse/HN5G-1306

Ìï≠Î™©	ÏÉÅÌÉú
tombstone_00, tombstone_01	Native crash Î∞úÏÉù Î°úÍ∑∏Î°ú, Wi-Fi Í¥ÄÎ†® Î°úÍ∑∏Îäî ÏïÑÎãò
anr_2025-03-31-08-48-50-199	ANR ÏÉÅÌô©ÏúºÎ°ú, Wi-Fi ÎòêÎäî MQTT Í¥ÄÎ†® Ï†ïÎ≥¥ ÏóÜÏùå

üîπ tombstone_00:
ÌîÑÎ°úÏÑ∏Ïä§: com.nexobcs.wallpad.homeview Ï∂îÏ†ï

signal 11 (SIGSEGV) ‚Üí null pointer dereference

Java Native Interface Í¥ÄÎ†® Î°úÍ∑∏ Îã§Ïàò Ï°¥Ïû¨ ‚Üí JNI contextÏóêÏÑú Î¨∏Ï†ú Í∞ÄÎä•ÏÑ± ÏûàÏùå

üîπ tombstone_01:
ÌîÑÎ°úÏÑ∏Ïä§: system_server

signal 11 (SIGSEGV)

Ïä§ÌÉùÏóê android.net.wifi.WifiStateMachine ÎòêÎäî WifiServiceImpl Îì±ÏùÄ ÏóÜÏùå ‚Üí Wi-Fi Í¥ÄÎ†® ÏßÅÏ†ë Ï∂©ÎèåÏùÄ ÏïÑÎãò

-----
[SWP530-4H] BLE
```
swp5304h:/ # dumpsys  bluetooth_manager                                  
Bluetooth Status                                                                                                                                              
  enabled: true                                                                                                                                               
  state: ON                                                                    
  address: 44:87:63:A7:F9:D0                                                   
  name: NHome01110111                  
  time since enabled: 00:01:53.839
                                       
Enable log:  
  05-29 20:42:02  Enabled  due to SYSTEM_BOOT by android
```
-----
adb shell 'setprop log.tag.RKISP2ImguUnit DEBUG'



-----
chore: adjust DOOR_CALL amp enable delay to 1 sec (LE1000, SWP530-4H, SDP530-4H)

- Align amp enable timing across all products as per latest requirement



-----
v4l2-ctl -d /dev/video5 --set-fmt-video=width=1920,height=1080,pixelformat=NV12 --stream-mmap=3 --stream-to=/data/local/tmp/out.yuv --stream-skip=1 --stream-count=1
ffplay out.yuv -f rawvideo -pixel_format nv12 -video_size 720x480



-----
LE1000_V11-0_20250113
git tag -a LE1000_V11-0_20250113 -m "LE1000 Release V11-0 (2025-01-13)"
git tag -a SWP530-4H_V11-0_20250624 -m "SWP530-4H Release V11-0 (2025-06-24)"
git tag -a SDP530-4H_V11-0_20250624 -m "SDP530-4H Release V11-0 (2025-06-24)"


-----
SYS_GRF Register (0xfdc60000)
GPIO1_D5 pin mux
Address : Operation Base + offset (0x001c)
fdc6001c: 00001110

-----
setenv bootargs 'storagemedia=emmc androidboot.storagemedia=emmc androidboot.mode=normal  androidboot.dtb_idx=0 androidboo		t.dtbo_idx=0 dyndbg="file drivers/headset_observe/rockchip_headset_core.c +p"'
adb shell "setprop log.tag.WiredAccessoryManager VERBOSE"
adb shell "setprop log.tag.UEventObserver VERBOSE"


adb wait-for-device ; adb root ; adb remount ; adb shell 'echo "file drivers/input/misc/intercom_handset.c +p" > /sys/kernel/debug/dynamic_debug/control'  ; adb shell 'cat /sys/kernel/debug/dynamic_debug/control | grep intercom'; adb shell 'echo "file sound/soc/codecs/ak7755.c +p" > /sys/kernel/debug/dynamic_debug/control' ; adb shell 'cat /sys/kernel/debug/dynamic_debug/control | grep ak7755'


adb wait-for-device ; adb shell "setprop log.tag.AudioHardwareTiny VERBOSE ; setprop log.tag.alsa_mixer VERBOSE; setprop log.tag.alsa_route VERBOSE ; setprop log.tag.V4L2Subdev VERBOSE" ;


tinymix "DSP Firmware PRAM" "data2"; tinymix "DSP Firmware CRAM" "data3" ; tinymix "DSPIN SDOUTAD" 1 ;  tinymix "LineOut Amp1" 1 ; tinymix "MIC Input Volume R" 13 ; tinymix "ADC Digital Volume R" 239 ;tinymix "Line Out Volume 1" 15 ; tinymix "DAC Digital Volume L" 231 ;  tinymix "ClassD Amp Enable" 1 ;

tinymix "DSP Firmware PRAM" "Off"; tinymix "DSP Firmware CRAM" "Off" ; tinymix "ClassD Amp Enable" 0 ; tinymix "LineOut Amp1" 0 ; tinymix "Handset Enable" 1; tinymix "LineOut Amp2" 1; tinymix "SELMIX AD"  1 ; tinymix "DAC MUX" "MIXOUT" ; tinymix "LineOut Amp2" 1; tinymix "SELMIX AD"  1 ; tinymix "DAC MUX" "MIXOUT" ; tinymix "DSPIN SDOUTAD" 0 ; tinymix "Line Out Volume 2" 15; tinymix  "LineOut Amp3 Mixer LOSW2" 0 ; tinymix "SDOUT1 Enable Switch"  0 ;
[Hook_off]  
tinymix "DSP Firmware PRAM" "data2"; tinymix "DSP Firmware CRAM" "data3" ; \
 tinymix "DSPIN SDOUTAD" 1 ;  tinymix "LineOut Amp1" 1 ; \
 tinymix "ClassD Amp Enable" 1 ; tinymix "Line Out Volume 1" 10 ; \
 tinymix "DAC MUX"  "DSP"



[Hook_on] 
 tinymix "ClassD Amp Enable" 0 ; tinymix "LineOut Amp1" 0 ; \
 tinymix "Handset Enable" 1; tinymix "LineOut Amp2" 1; \
 tinymix "SELMIX AD" 1; tinymix "DAC MUX" "MIXOUT" ; \
 tinymix "Line Out Volume 2" 10 ; tinymix "LineOut Amp2" 1; 



"LineOut Amp3 Mixer LOSW2"




=====
[pstn_call]

[pstn_dial]

[Hook_off] on 
tinymix "DSP Firmware PRAM" "data2"; tinymix "DSP Firmware CRAM" "data3" ; \
 tinymix "DSPIN SDOUTAD" 1 ;  tinymix "LineOut Amp1" 1 ; \
 tinymix "ClassD Amp Enable" 1 ; tinymix "Line Out Volume 1" 10 ; \
 tinymix "DAC MUX"  "DSP"
 
[Hook_off] off
tinymix "LineOut Amp1" 0 ; tinymix "ClassD Amp Enable" 0 ;  tinymix "Line Out Volume 1" 0 ;


[Hook_on] on
 tinymix "Handset Enable" 1; tinymix "LineOut Amp2" 1; \
 tinymix "SELMIX AD" 1; tinymix "DAC MUX" "MIXOUT" ; \
 tinymix "Line Out Volume 2" 10 ; 

[Hook_on] off
 tinymix "Handset Enable" 0; tinymix "LineOut Amp2" 0; tinymix "Line Out Volume 2" 0 ; 
 
 
=====
tinymix "Line Out Volume 1" 10; tinymix "ADC Digital Volume R" 201 ; tinymix "Handset Enable" 0 ; tinymix "LineOut Amp1" 1 ; tinymix "SELMIX AD" 0 


    VOIP_GURD_CALL_ROUTE,      // 43
VOIP_HOME_CALL_ROUTE		
VOIP_LOBY_CALL_ROUTE


=====
probe()ÏóêÏÑú ÏïÑÎûò Ìï®ÏàòÎ•º Ìò∏Ï∂ú
INIT_DELAYED_WORK(&headset->h_delayed_work[HEADSET],
			  headsetobserve_work);
headsetobserve_work Ìï®ÏàòÏóêÏÑú extcon_set_state_sync Ìï®ÏàòÎ•º Ìò∏Ï∂îÌï®.



=====
feat : [audio] Add support for handset device

- updated audio routing and device configuration to support handset (receiver) functionality.
- modified audio HAL and relevant mixer controls for proper handset audio path.
- ensured seamless switching between speaker and handset modes.


=====
PMIC : LDO9

=====
adb wait-for-device ; adb root ; adb remount  ; adb shell "echo 1 > /sys/class/gpio/gpio15/value ; echo 0 > /sys/class/gpio/gpio42/value "

adb wait-for-device ; adb root ; adb remount  ; adb shell "echo 1 > /sys/class/gpio/gpio15/value "

adb wait-for-device ; adb root ; adb remount  ; adb shell "echo 0 > /sys/class/gpio/gpio15/value "
 
adb shell " echo 1 >  /sys/kernel/debug/regulator/vcca1v8_image/enable"


while true; do adb shell "echo 1 > /sys/class/gpio/gpio15/value " ; sleep 2 ; adb shell "echo 0 > /sys/class/gpio/gpio15/value " ; sleep 2 ; done


=====
adb root ;adb remount ; adb shell 'echo "file drivers/gpu/drm/bridge/synopsys/dw-hdmi.c +p " > /sys/kernel/debug/dynamic_debug/control' ; adb shell 'echo "file drivers/gpu/drm/rockchip/dw_hdmi-rockchip.c +p " > /sys/kernel/debug/dynamic_debug/control'


setenv bootargs 'storagemedia=emmc androidboot.storagemedia=emmc androidboot.mode=normal  androidboot.dtb_idx=0 androidboot.dtbo_idx=0 dyndbg="file drivers/gpu/drm/bridge/synopsys/dw-hdmi.c +p "'


drivers/gpu/drm/rockchip/dw_hdmi-rockchip.c



=====
ÏõêÏù∏
ÏùºÎ∂Ä Î≥¥ÎìúÏóêÏÑú HDMI Ìï¥ÏÉÅÎèÑ Ï†ÑÌôò(1920x1080 ‚Üí 640x480) Ïãú
Video Encoder(CH7107B)Í∞Ä HDMI Ïã†Ìò∏ Î≥ÄÌôîÏóê Ï†ïÏÉÅÏ†ÅÏúºÎ°ú ÎèôÍ∏∞ÌôîÎêòÏßÄ ÏïäÏïÑ
TV-Out Ï∂úÎ†•Ïù¥ ÏÉùÏÑ±ÎêòÏßÄ ÏïäÎäî ÌòÑÏÉÅ Î∞úÏÉù

Ï£ºÎêú ÏõêÏù∏ÏùÄ Ï†ÑÏõê ÌíàÏßà, Ïã†Ìò∏ ÏïàÏ†ïÏÑ±, Î∂ÄÌíà Ìé∏Ï∞® Îì±
ÌôòÍ≤ΩÏ†Å ÏöîÏù∏Ïóê Îî∞Î•∏ Ïã†Ìò∏ ÎèôÍ∏∞Ìôî Ïã§Ìå® Í∞ÄÎä•ÏÑ±	

ÎåÄÏ±Ö	
Î∂ÄÌä∏Î°úÎçîÏóêÏÑú HDMI/Video Encoder Ïã†Ìò∏ ÏïàÏ†ïÏÑ± Î∞è
Ï¥àÍ∏∞Ìôî ÏãúÌÄÄÏä§ Ï†úÏñ¥ Î°úÏßÅÏùÑ Í∞úÏÑ†ÌïòÏó¨ Ï†ÅÏö© ÏôÑÎ£å

ÏñëÏÇ∞ Ï†úÌíà(LE1000)ÏóêÏÑúÎèÑ Ïû¨ÌòÑÎê† Ïàò ÏûàÏñ¥
OTA ÏóÖÎç∞Ïù¥Ìä∏Î•º ÌÜµÌï¥ Regulator Ï†úÏñ¥ Í∏∞Îä• Ï∂îÍ∞Ä Ï†ÅÏö©

Ïã†Î¢∞ÏÑ±ÌåÄÏùò Í≤ÄÏ¶ù Í≤∞Í≥º ÌîºÎìúÎ∞± ÎåÄÍ∏∞ Ï§ë

=====
adb wait-for-device ; adb root ; adb remount ; adb shell 'echo "file drivers/input/misc/bs83b.c +p" > /sys/kernel/debug/dynamic_debug/control ; cat /sys/kernel/debug/dynamic_debug/control |  grep bs83b.c'



=====
adb wait-for-device ; adb root ; adb remount ; adb shell 'echo "file drivers/leds/leds-ht16k33.c +p" > /sys/kernel/debug/dynamic_debug/control ; cat /sys/kernel/debug/dynamic_debug/control | grep ht16k33' 


=====

cmd wall_service inject_gpio_value DOORBUTTON_0 1  ; sleep 0.5; cmd wall_service inject_gpio_value DOORBUTTON_0 0 ; sleep 10 ; input tap 939 565 ; sleep 5 ; input tap 939 565
cmd wall_service inject_gpio_value DOORBUTTON_0 1  ; sleep 0.5; cmd wall_service inject_gpio_value DOORBUTTON_0 0 ; sleep 5 ; input tap 39 565 ; 

echo "file drivers/gpu/drm/bridge/synopsys/dw-hdmi.c +p" > /sys/kernel/debug/dynamic_debug/control


=====
‚úÖ 5Îã®Í≥Ñ: HDMI PHY ÏÑ§Ï†ïÍ∞í ÌäúÎãù
Ïã†Ìò∏ ÌíàÏßàÏù¥ ÎØ∏Îã¨Ïùº Í≤ΩÏö∞, DTSÏóêÏÑú rockchip,phy-table Ìï≠Î™© ÏàòÏ†ïÏúºÎ°ú Î≥¥Ï†ï Í∞ÄÎä•

dts
Î≥µÏÇ¨
Ìé∏Ïßë
&hdmi {
    rockchip,phy-table =
        <27000000  0x8007 0x0000 0x0270>, // Ïòà: 27MHz Ï∂îÍ∞Ä
        ...
        }
        
setprop persist.vendor.resolution.main 1280x720p60
setprop sys.display.timeline 1

======

chore : [priv-gpio] Add and organize GPIO definitions

- activate the converter module by setting SUBDISPLAYINIT_0 to high

=====
Í∑∏Îüº Ïù¥Î†áÍ≤å Ìï¥Î≥¥Ïûê. 
AUDIO:door_call, door_subp_call, voip_door_callÏù∏Í≤ΩÏö∞Îßå, DOOR_MIC_EN:high Ïù¥Î©∞ Í∑∏Ïô∏Îäî low ÏÉÅÌÉú

- Í∏∞Ï°¥
 * ÌòÑÍ¥Ä Î≥¥Í∏∞(DOOR_POWER_CTL:high, AUDIO:normal) -> Î¨∏Ïó¥Î¶º(DOOR_POWER_CTL:low, AUDIO:normal)

 * ÎèÑÏñ¥ Î≤ÑÌäºÏùÑ ÎàåÎü¨ Ìò∏Ï∂ú ÌõÑ ÌÜµÌôî ÌõÑ Î¨∏Ïó¥Î¶º, 
ÎèÑÏñ¥ Ìò∏Ï∂ú(DOOR_POWER_CTL:high, AUDIO:door_ring) -> ÎèÑÏñ¥ ÌÜµÌôî(DOOR_POWER_CTL:high, AUDIO:door_call) -> Î¨∏Ïó¥Î¶º Î©òÌä∏ Ï∂úÎ†•(DOOR_POWER_CTL:high, AUDIO:door_ring) -> Ï¢ÖÎ£å(DOOR_POWER_CTL:low, AUDIO:normal)

 * ÎèÑÏñ¥ Î≤ÑÌäºÏùÑ ÎàåÎü¨ Ìò∏Ï∂ú ÌõÑ, Î¨∏Ïó¥Î¶º(ÌÜµÌôîX)
ÎèÑÏñ¥ Ìò∏Ï∂ú(DOOR_POWER_CTL:high, AUDIO:door_ring) ->  Î¨∏Ïó¥Î¶º Î©òÌä∏ Ï∂úÎ†•(DOOR_POWER_CTL:high, AUDIO:door_ring) -> Ï¢ÖÎ£å(DOOR_POWER_CTL:low, AUDIO:normal)

- ÏãúÌóò ÏöîÏ≤≠ Î∞©Î≤ï (Ìï≠Ïãú DOOR_POWER_CTL:high)
 * ÌòÑÍ¥ÄÎ≥¥Í∏∞(AUDIO:normal) -> Î¨∏Ïó¥Î¶º(DOOR_MIC_EN:low)

 * ÎèÑÏñ¥ Î≤ÑÌäºÏùÑ ÎàåÎü¨ Ìò∏Ï∂ú ÌõÑ ÌÜµÌôî Î¨∏ Ïó¥Î¶º,
ÎèÑÏñ¥ Ìò∏Ï∂ú(AUDIO:door_ring, door Ïû•Ïπò micomÏóêÏÑú Ìä∏Î¶¨Í±∞ Îê®) -> ÎèÑÏñ¥ ÌÜµÌôî(AUDIO:door_call, DOOR_MIC_EN:high ÏÉÅÌÉú) -> Î¨∏Ïó¥Î¶º Î©òÌä∏ Ï∂úÎ†•(DOOR_POWER_CTL:high, AUDIO:door_ring, DOOR_MIC_EN:low ÏÉÅÌÉúÍ∞Ä ÎêòÏñ¥ ÏïàÎê®.) -> Ï¢ÖÎ£å(DOOR_POWER_CTL:low, AUDIO:normal)

 * ÎèÑÏñ¥ Î≤ÑÌäºÏùÑ ÎàåÎü¨ Ìò∏Ï∂ú ÌõÑ, Î¨∏Ïó¥Î¶º(ÌÜµÌôîX)
(ÏûëÏÑ±Ï§ë)

door_ring ÏÉÅÌÉúÏóêÏÑú DOOR_MIC_EN:highÏãú, ÌïòÏö∏ÎßÅÏù¥ Î∞úÏÉùÎêòÏñ¥ ÏïàÎê®. 


UART7_RTSN - resst
UART6_RX   - rx
UART6_TX   - tx



=====

 adb shell 'tinymix "LineOut Amp1"'
 
 
=====
feat :[audio] add door_active and emergency_mode support for always-on doorphone

- introduced new audio modes:
 * door_active: activate door device without audio output (monitoring/opening)
 * emergency_mode: enable immediate audio path during emergency scenarios
- updated audio policy configuration and path control to support always-on power model

=====
setenv bootargs 'storagemedia=emmc androidboot.storagemedia=emmc androidboot.mode=normal  androidboot.dtb_idx=0 androidboot.dtbo_idx=0 dyndbg="file drivers/leds/leds-pwmx.c +p"'



=====
https://its.kdiwin.com:8080/browse/HN5G-1669
feat : [audio] add default_mc_en audio mode for door module enable

- introduced new audio mode: default_mc_en
 * keeps internal speaker path as default
 * enables DOOR_MIC_EN (door module activation) for camera usage 
- updated audio_policy_configuration and pinctrl definitions
- ensured compatibility with existing modes (door_active, door_ring, emergency)

Refs: SEP920 always-on doorphone

=====

1. door_ring MICEN ÌôúÏÑ±Ìôî
2. MICEN ÌôúÏÑúÌôî ÏùºÎïå, dc_ÌôúÏÑ±Ìôî ÌôïÏù∏



=====
chore : [audio] Remove emergency audio route path

- removed because it overlaps with the emergency audio route path and door_ring audio route path.

=====
LHÏõîÌå®Îìú Proximity Sensor : White & Black Í∏∞Íµ¨ ÏÑºÏÑú Ìé∏Ï∞® ÏãúÌóò : Í≤ÄÏ†ï Í∏∞Íµ¨Í∞Ä ÏûÑÏãúÎ°ú ÎßåÎì§Ïñ¥ÏßÑ Í∏∞Íµ¨Ïó¨ÏÑú ÎÜíÏùÄ ÏûÑÍ≥ÑÍ∞íÏùÑ ÏûÖÎ†•Î∞õÏßÄ Î™ªÌïúÍ±∞ÏòÄÏúºÎ©∞, Í∏∞Íµ¨ ÏàòÎ†πÌõÑ ÌôïÏù∏ ÏòàÏ†ï.
RK3576 PoC Í∞úÎ∞ú : ÏóÖÎ¨¥ Ïù∏Í≥Ñ
SLP710-5B Í∞úÎ∞ú  : Ïù¥ÎØ∏ÏßÄÎ•º 1Í∞úÎ°ú Í∞àÏßÄ, 2Í∞úÎ°ú Í∞àÏßÄ ÎÖºÏùò (2Í∞úÎ°ú Í∞ÄÎäîÍ≤ΩÏö∞, Ïú†ÌÜµ, ÌôàÎÑ∑)


=====
adb shell settings put secure --user 0 show_touches 1
adb shell settings put system --user 0 pointer_location 1


=====
SLP710 , SLP711 ÏúºÎ°ú project Ïû¨ÏÉùÏÑ±.
24inch TouchScreen SNP920, LE2000 Ï†ÅÏö©.
ÎèÑÏñ¥ Ïû•Ïπò Ïã†Î¢∞ÏÑ± Ïù¥Ïäà : Known Ïù¥Ïäà. 
ÏÑúÎ∏å Ïû•Ïπò Í∞úÎ∞ú Ïù¥Ïäà : Ïò§ÎîîÏò§ Ï†úÏñ¥ Í∏∞Îä• Ï∂îÍ∞Ä ÌïÑÏöî.
 
 
 
=====
> Android ÏóêÏÑú IndexÎ•º Î∞îÍæ∏Îäî ÏàúÍ∞Ñ, Ïò§ÎîîÏò§ HALÏù¥ DAC Ïóê ÌïòÎìú Ïä§ÌÖùÏùÑ Ï£ºÍ≥†, Í∑∏ ÏàúÍ∞Ñ Gain Jump -> Ìäê/Ìåù ÌòÑÏÉÅ Î∞úÏÉù. 
ÎßåÏïΩ Index Í∞íÏù¥ ÎèôÏùºÌï¥ÏÑú, Í≤åÏù∏ 

> DAC Í∞íÏùÑ Í≥†Ï†ïÌï¥ÎëêÍ≥†, Volume CurveÏõÄÏßÅÏù¥Î©¥ Í≤ΩÎ°úÍ∞Ñ 


$ adb root ; adb remount ; adb push out/target/product/nhn1311n/system/priv-app/WallService/WallService.apk  /system/priv-app/WallService/ ; adb push out/target/product/nhn1311n/system/priv-app/WallService/oat/* /system/priv-app/WallService/oat/ ; adb push out/target/product/nhn1311n/system/lib64/libwallservice.so /system/lib64/ ; adb shell killall com.kdiwin.wall



=====
fix : fix ring volume gain jump on door output

- issue: door audio output momentarily spikes when changing ring volume index on wallpad
- cause: framework applies digital attenuation and HAL adjusts DAC gain asynchronously, leading to gain jump
- fix:
  * flattened volume curve (idx0 and idx1 same dB) to prevent hard step 
  * tested keeping door output constant to confirm issue source
  
  
=====
adb wait-for-device ; adb root ; adb remount ; adb shell "cmd wall_service set_audio_route subp_call" 

=====
feat : add subp_call route for wallpad subphone mode

- added new route path `subp_call` in audio policy configuration
- configures speaker (OUT) and mic (IN) for subphone usage
- updated mixer controls and pinctrl nodes to support subphone call path
- enables wallpad to operate as subphone for Door-call, VoIP-call, and PSTN-call

====
ÎèÑÏñ¥ Ìò∏Ï∂ú Ïãú, Î≥ºÎ•® Î†àÎ≤®ÏóêÏÑú Î≥ºÎ•® Ï¶ùÌè≠ÎêòÎäî ÌòÑÏÉÅ Í∞úÏÑ†. (HN, HA ÏõîÌå®Îìú Ï†úÌíà master Ï†ÅÏö©)
ÏõîÌå®Îìú ÏÑúÎ∏åÌè∞ Í∏∞Îä• ÏßÄÏõêÏúÑÌïú Ïò§ÎîîÏò§ Î™®Îìà Íµ¨ÌòÑ (LHÏõîÌå®Îìú Ïö∞ÏÑ† Ï†ÅÏö©)
5ÏÑ∏ÎåÄ Ïú†ÌÜµÌñ• ÏõîÌå®Îìú Ï†úÌíà ÏÑ§Í≥Ñ Í≤ÄÌÜ†(ÎèÑÏñ¥Ìè∞ 2Í∞ú ÏãúÎÇòÎ¶¨Ïò§), CCTV Í∏∞Îä•


=====
feat : [audio] Add volume control for subp_call route

- enabled independent gain control for spk/mic path during subphone mode
- ensure stable volume handling for Door-call, VoIP-call, and PSTN-call in subp_call route


=====

adb shell "cmd wall_service list_patch_routes"
 * patch-routes: 9
   - AudioPatchRoute{ name=extr_gurd_call sink=extr_gurd_call source=primary output stream=0 }
   - AudioPatchRoute{ name=extr_home_call sink=extr_home_call source=primary output stream=0 }
   - AudioPatchRoute{ name=voip_gurd_call sink=voip_gurd_call source=primary output stream=0 }
   - AudioPatchRoute{ name=voip_home_call sink=voip_home_call source=primary output stream=0 }
   - AudioPatchRoute{ name=extr_loby_call sink=extr_loby_call source=primary output stream=0 }
   - AudioPatchRoute{ name=voip_loby_call sink=voip_loby_call source=primary output stream=0 }
   - AudioPatchRoute{ name=pstn_call sink=pstn_call source=primary output stream=0 }
   - AudioPatchRoute{ name=pstn_dial sink=pstn_dial source=primary output stream=8 }
   - AudioPatchRoute{ name=default sink=default source=primary output stream=-1 }
 * current route: AudioPatchRoute{ name=extr_loby_call sink=extr_loby_call source=primary output stream=0 }
 * current steam: STREAM_VOICE_CALL(0)
 * client package: com.wallpad.call
 * audio patches: 1
   patch: 12
     sources:
       - port='1:primary output,,' s_r='48000' mask='12' fmt='2' gain='' 
     sinks:
       - port='2:,speaker,' s_r='0' mask='1' fmt='1' gain='' 


adb shell "cmd wall_service list_patch_routes"

adb shell "cmd wall_service set_audio_route extr_gurd_call"
adb shell "cmd wall_service set_audio_route extr_home_call"
adb shell "cmd wall_service set_audio_route extr_loby_call"



=====
adb -s $lh wait-for-device ; adb -s $lh root ; adb -s $lh remount ; adb -s $lh shell 'echo "file drivers/misc/mcu_bridge_i2c.c +p" > /sys/kernel/debug/dynamic_debug/control'
echo "file drivers/misc/mcu_bridge_i2c.c +p" > /sys/kernel/debug/dynamic_debug/control
cat /sys/kernel/debug/dynamic_debug/control | grep  mcu_bridge
cd /sys/bus/i2c/devices/1-0028

setenv bootargs 'storagemedia=emmc androidboot.storagemedia=emmc androidboot.mode=normal  androidboot.dtb_idx=0 androidboot.dtbo_idx=0 dyndbg="file drivers/misc/mcu_bridge_i2c.c +p"'


LIGHT_ALL >> KEY_F1 >> KEYCODE_F1
sendevent /dev/input/event0 1 59 1 ; sendevent /dev/input/event0 0 0 0 ; sendevent /dev/input/event0 1 59 0 ; sendevent /dev/input/event0 0 0 0
LIGHT_1 >> KEY_F2 >> KEYCODE_F2
sendevent /dev/input/event0 1 60 1 ; sendevent /dev/input/event0 0 0 0 ; sendevent /dev/input/event0 1 60 0 ; sendevent /dev/input/event0 0 0 0
LIGHT_2 >> KEY_F3 >> KEYCODE_F3
sendevent /dev/input/event0 1 61 1 ; sendevent /dev/input/event0 0 0 0 ; sendevent /dev/input/event0 1 61 0 ; sendevent /dev/input/event0 0 0 0
LIGHT_3 >> KEY_F4 >> KEYCODE_F4
sendevent /dev/input/event0 1 62 1 ; sendevent /dev/input/event0 0 0 0 ; sendevent /dev/input/event0 1 62 0 ; sendevent /dev/input/event0 0 0 0
LIGHT_4 >> KEY_F5 >> KEYCODE_F5
sendevent /dev/input/event0 1 63 1 ; sendevent /dev/input/event0 0 0 0 ; sendevent /dev/input/event0 1 63 0 ; sendevent /dev/input/event0 0 0 0
LIGHT_5 >> KEY_F6 >> KEYCODE_F6
sendevent /dev/input/event0 1 64 1 ; sendevent /dev/input/event0 0 0 0 ; sendevent /dev/input/event0 1 64 0 ; sendevent /dev/input/event0 0 0 0
LIGHT_6 >> KEY_F7 >> KEYCODE_F7
sendevent /dev/input/event0 1 65 1 ; sendevent /dev/input/event0 0 0 0 ; sendevent /dev/input/event0 1 65 0 ; sendevent /dev/input/event0 0 0 0
STANDBY_ALL >> KEY_F8 >> KEYCODE_F8
sendevent /dev/input/event0 1 66 1 ; sendevent /dev/input/event0 0 0 0 ; sendevent /dev/input/event0 1 66 0 ; sendevent /dev/input/event0 0 0 0
STANDBY_1 >> KEY_F9 >> KEYCODE_F9
sendevent /dev/input/event0 1 67 1 ; sendevent /dev/input/event0 0 0 0 ; sendevent /dev/input/event0 1 67 0 ; sendevent /dev/input/event0 0 0 0
STANDBY_2 >> KEY_F10 >> KEYCODE_F10
sendevent /dev/input/event0 1 68 1 ; sendevent /dev/input/event0 0 0 0 ; sendevent /dev/input/event0 1 68 0 ; sendevent /dev/input/event0 0 0 0

=====

project-device-newjeans-slp7105b
ÎîîÎ∞îÏù¥Ïä§ Î™®Îç∏ ÌîÑÎ°úÏ†ùÌä∏ (SLP710-5B)
Home Network 10-inch Lobby product

project-device-newjeans-slp7205b
ÎîîÎ∞îÏù¥Ïä§ Î™®Îç∏ ÌîÑÎ°úÏ†ùÌä∏ (SLP720-5B)
Home Network 10-inch Facial Recognition Lobby product

project-device-newjeans-slp7114b
ÎîîÎ∞îÏù¥Ïä§ Î™®Îç∏ ÌîÑÎ°úÏ†ùÌä∏ (SLP711-4B)
Home Auto 10-inch Lobby product

project-device-newjeans-slp7214b
ÎîîÎ∞îÏù¥Ïä§ Î™®Îç∏ ÌîÑÎ°úÏ†ùÌä∏ (SLP721-4B)
Home Auto 10-inch Facial Recognition Lobby product

project-device-newjeans-swp5204b
ÎîîÎ∞îÏù¥Ïä§ Î™®Îç∏ ÌîÑÎ°úÏ†ùÌä∏ (SWP520-4B) Home Auto 10-inch wallpad product

project-device-newjeans-swp7204b
ÎîîÎ∞îÏù¥Ïä§ Î™®Îç∏ ÌîÑÎ°úÏ†ùÌä∏ (SWP720-4B) Home Auto 13-inch wallpad products


=====
[TV_OUT SIGNAL] 
lobby by-pass
VIDEOSEL_0(73) : low
VIDEOSEL_1(85) : low
> echo 73 > /sys/class/gpio/export; echo out > /sys/class/gpio/gpio73/direction; echo 0 > /sys/class/gpio/gpio73/value; echo 85 > /sys/class/gpio/export; echo out > /sys/class/gpio/gpio85/direction; echo 0 > /sys/class/gpio/gpio85/value


door by-pass(ntsc)
VIDEOSEL_0(73) : high
VIDEOSEL_1(85) : low
> echo 73 > /sys/class/gpio/export; echo out > /sys/class/gpio/gpio73/direction; echo 1 > /sys/class/gpio/gpio73/value; echo 85 > /sys/class/gpio/export; echo out > /sys/class/gpio/gpio85/direction; echo 0 > /sys/class/gpio/gpio85/value


tv-out
VIDEOSEL_1(85) : high
> echo 16 > /sys/class/gpio/export; echo out > /sys/class/gpio/gpio16/direction; echo 1 > /sys/class/gpio/gpio16/value; echo 85 > /sys/class/gpio/export; echo out > /sys/class/gpio/gpio85/direction; echo 1 > /sys/class/gpio/gpio85/value


[VIDEO_IN SIGNAL]
door0
DOORPOWERCTL_0(40) : high
DPCAMSEL_0(74) : low
LBCAMSEL_0(82) : low 
> echo 40 > /sys/class/gpio/export; echo out > /sys/class/gpio/gpio40/direction; echo 1 > /sys/class/gpio/gpio40/value; echo 74 > /sys/class/gpio/export; echo out > /sys/class/gpio/gpio74/direction; echo 0 > /sys/class/gpio/gpio74/value; echo 82 > /sys/class/gpio/export; echo out > /sys/class/gpio/gpio82/direction; echo 0 > /sys/class/gpio/gpio82/value


door1
DOORPOWERCTL_1(113) : high
DOORMICE(98) : high
DPCAMSEL_0(74) : high
LBCAMSEL_0(82) : low
> echo 113 > /sys/class/gpio/export; echo out > /sys/class/gpio/gpio113/direction; echo 1 > /sys/class/gpio/gpio113/value; echo 98 > /sys/class/gpio/export ; echo out > /sys/class/gpio98/direction ; echo 1 > /sys/class/gpio98/value ; echo 74 > /sys/class/gpio/export; echo out > /sys/class/gpio/gpio74/direction; echo 1 > /sys/class/gpio/gpio74/value; echo 82 > /sys/class/gpio/export; echo out > /sys/class/gpio/gpio82/direction; echo 0 > /sys/class/gpio/gpio82/value

subdisplay_init
echo 16 > /sys/class/gpio/export; echo out > /sys/class/gpio/gpio16/direction; echo 1 > /sys/class/gpio/gpio16/value;

=====
git checkout -b feature/ALLWINNER-1002


git commit -m $'feat: Add emergency audio policy for all products\n\n- added emergency audio policy configuration\n- applied common policy structure for horizontal rollout across all products\n- ensured consistent emergency audio routing and priority handling'


feat: Add emergency audio policy for all products

- added emergency audio policy configuration
- applied common policy structure for horizontal rollout across all products
- ensured consistent emergency audio routing and priority handling


=====

SEP520(NTSC), DP83(NTSC) 
SEP920(FHD)

tinymix 'MIC Input Volume L' 15 ; tinymix 'ADC Mute' 0 ; tinymix 'SDOUT1 MUX' 3; tinymix 'DAC Mute' 0 ; tinymix 'LineOut Amp1' 1 ; tinymix 'DAC MUX' 3 ; tinymix 'ClassD Amp Enable' 1 ; tinymix 'vad switch' 1 
tinycap /data/local/tmp/record.wav -D 0 -d 0 -r 44100 -b 16 -c 2 -T 5
Capturing sample: 2 ch, 44100 hz, 16 bit
Captured 241664 frames

tinyplay /data/local/tmp/record.wav -D 0 -d 0

=====
(09) DOOR_ACTIVE : DOOR1_MIC_EN tinymix 'IO Control Path' 'DOOR_ACTIVE'
(98) DOOR1_ACTIVE : DOOR2_MIC_EN tinymix 'IO Control Path' 'DOOR1_ACTIVE'
tinymix 'IO Control Path' 'STBY'

cat /sys/kernel/debug/pinctrl/pinctrl-rockchip-pinctrl | grep 5-0



=====
SWP530-4H SUBPHONE
echo 73 > /sys/class/gpio/export ; echo "out" > /sys/class/gpio/gpio73/direction ; echo 1 > /sys/class/gpio/gpio73/value

=====
 echo 1 > /sys/class/gpio/gpio40/value ; tinymix 'IO Control Path'  'DOOR1_ACTIVE'
echo 0 > /sys/class/gpio/gpio40/value ; tinymix 'IO Control Path' 'STBY'


=====
TP2860-EXTERNAL_CAMERA
[DOOR1]
(74)DP_CAM_SEL(H) 
(42)LB_CAM_SEL(L) 
(113)DOORPOWERCTL_1(H)

echo 74 > /sys/class/gpio/export ; echo 'out' > /sys/class/gpio/gpio74/direction ; echo 1 > /sys/class/gpio/gpio74/value ; 
echo 0 > /sys/class/gpio/gpio42/value ; 
echo 1 > /sys/class/gpio/gpio113/value ; 

=====
HA
ÌÜµÌôî ÏãúÎÇòÎ¶¨Ïò§           (check) firmware(pram)          firmware (cram)         
door_call		 	 (C) [ak7755_pram_data2.bin] [ak7755_cram_data2.bin] (SWP530) (SDP530) (SDP720) (SDP520)
door1_call       	     [ak7755_pram_data2.bin] [ak7755_cram_data2.bin]
extr_loby_call	 	 (C) [ak7755_pram_data2.bin] [ak7755_cram_data2.bin] (SWP530) (SDP530)
extr_gurd_call	 	 (C) [ak7755_pram_data2.bin] [ak7755_cram_data2.bin] (SWP530) (SDP530)
extr_home_call	 	 (C) [ak7755_pram_data2.bin] [ak7755_cram_data2.bin] (SWP530) (SDP530)
extr_subp_call	 	 (C) [N/A]                   [N/A]                   (SWP530) (SDP530)
door_subp_call	 	 (C) [N/A]                   [N/A]                   (SWP530) (SDP530)
door1_subp_call      (C) [N/A]                   [N/A]

voip_home_call   	 (C) [ak7755_pram_data2.bin] [ak7755_cram_data5.bin] (SWP530)
voip_loby_call   	 (C) [ak7755_pram_data2.bin] [ak7755_cram_data6.bin] (SWP530)
voip_gurd_call   	 (C) [ak7755_pram_data2.bin] [ak7755_cram_data7.bin] (SWP530)
door_ring		 	 (C) [N/A]                   [N/A]                   (SWP530) (SDP530)
door1_ring        	     [N/A]                   [N/A]                   
normal				 (C) [N/A]                   [N/A]                   (SWP530) (SDP530)

voip_gurd_subp_call	 (C) [N/A]                   [N/A]                   (SWP530) (SDP530)
voip_home_subp_call  (C) [N/A]                   [N/A]                   (SWP530) (SDP530)
voip_loby_subp_call  (C) [N/A]                   [N/A]                   (SWP530) (SDP530)

mobi_home_cal		 (C) [ak7755_pram_data2.bin] [ak7755_cram_data3.bin] (SWP530)
mobi_door_call		 (C) [ak7755_pram_data2.bin] [ak7755_cram_data4.bin] (SWP530)
mobi_door1_call 	     [ak7755_pram_data2.bin] [ak7755_cram_data4.bin]
mobi_loby_call		 (C) [ak7755_pram_data2.bin] [ak7755_cram_data4.bin] (SWP530)
emergency       	     [N/A]                   [N/A]                   (SWP530)
subp_call     		     [N/A]                   [N/A]                   (SWP530)

		
=====
chore :[audio]Use wildcard pattern for AK7755 firmware files

- simplify audio.mk by replacing individual ak7755_*.bin entries
with wildcard pattern matching for automatic file inclusion.

=====
chore: commit SDP530-4H V13 release manifest

- snapshot SDP530-4H V13 release manifest
- freeze project revisions for SDP530-4H V13 release

 git tag -a SDP530-4H_V13-0_20260127 -m "SDP530-4H V13-0 release (2026-01-27)"
 
 
=====
chore : Add subphone hardware feature support

- add com.kdiwin.hardware.subphone feature definition
- add feature XML to declare subphone capability
- enable subphone module in snp5215bmlh product


====
chore: Update le1000 kernel project release

- update kernel project for le1000 product
- reflect latest release changes


git tag -a SWP530-4H_V14-0_20260130 -m "SWP530-4H platform project release V14-0"
git tag -a SDP530-4H_V13-0_20260130 -m "SDP530-4H platform project release V13-0"
git tag -a LE1000_V12-0_20260130 -m "LE1000 platform project release V12-0"

=====
echo 73 > /sys/class/gpio/export  ; echo "out" > /sys/class/gpio/gpio73/direction ; echo 0 > /sys/class/gpio/gpio73/value ;
echo 85 > /sys/class/gpio/export  ; echo "out" > /sys/class/gpio/gpio85/direction ; echo 0 > /sys/class/gpio/gpio85/value ;
echo 82 > /sys/class/gpio/export  ; echo "out" > /sys/class/gpio/gpio82/direction ; echo 1 > /sys/class/gpio/gpio82/value ;


=====
A527

====
adb shell dumpsys media.camera -v 1
====================================================================================================

terminal : 192.168.27.243 : rk3568_dev 
ssh-agent > ~/.ssh-agent.sh ;  source ~/.ssh-agent.sh ; ssh-add ~/.ssh/lchyq113\@kdiwin.com

1. cd develop/Rockchip/ROCKCHIP_ANDROID12_DEV
 clear ; jfiglol -a -f=1 -t ~/Private/github/figlet-fonts/ANSI\ Regular.flf  LH_WP

2. cd develop/Rockchip/ROCKCHIP_ANDROID12_DEV_POC7
 clear ; jfiglol -a -f=2 -t ~/Private/github/figlet-fonts/ANSI\ Regular.flf LE1000
 
3. cd develop/Rockchip/ROCKCHIP_ANDROID12_HN5G_LE1000
 clear ; jfiglol -a -f=2 -t ~/Private/github/figlet-fonts/ANSI\ Regular.flf SWP720
 
4. cd /home/lchy0113/work/Rockchip/ROCKCHIP_ANDROID12_HN5G_ETC
 clear ; jfiglol -a -f=2 -t ~/Private/github/figlet-fonts/ANSI\ Regular.flf SWP520
 
5. cd work/Rockchip/ROCKCHIP_ANDROID12_HN5G_SGP511
 clear ; jfiglol -a -f=2 -t ~/Private/github/figlet-fonts/ANSI\ Regular.flf SGP511
 
6. cd /home/lchy0113/work/Rockchip/ROCKCHIP_ANDROID12_HN5G_SWP530
 clear ; jfiglol -a -f=2 -t ~/Private/github/figlet-fonts/ANSI\ Regular.flf SWP530
====================================================================================================
